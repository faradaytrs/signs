<!doctype html>
<!--suppress HtmlUnknownAnchorTarget -->
<html lang="en" ng-app="Signs">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
	<title>Online signs</title>
	<script src="bower_components/sweetalert/lib/sweet-alert.min.js"></script>
	<link rel="stylesheet" href="bower_components/sweetalert/lib/sweet-alert.css"/>
	<script src="bower_components/konva/konva.min.js"></script>
	<script src="bower_components/jquery/dist/jquery.min.js"></script>
	<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.css"/>
	<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="bower_components/js-xls/dist/xls.min.js"></script>
	<script src="bower_components/angular/angular.min.js"></script>
	<script src='bower_components/angular-file-model/angular-file-model.js'></script>
	<script src="signs.min.js"></script>
	<link rel="stylesheet" href="style/signs.css"/>
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
	<div class="container" ng-controller="modelsController">
		<div class="row">
			<div class="col-md-2">
				<h3>Cost: <span class="label" ng-class="(calcPrice() == 0) ? 'label-danger' : 'label-success'">{{calcPrice()}} kr</span></h3>
			</div>
			<div class="col-md-6">
				<ul class="nav nav-pills" ng-controller="materialsController">
					<li class="disabled" role="presentation"><a href="#">Material:</a></li>
					<li role="presentation" ng-class="{'active': model.material == material}"
					    ng-repeat="material in materials"><!--suppress HtmlUnknownAnchorTarget -->
						<a ng-click="changeMaterial(material)"
					                                         href="#/">{{material}}</a></li>
				</ul>
			</div>
			<div class="col-md-4">
				<div class="form-group">
					<div class="input-group">
						<label class="sr-only" for="order">Order</label>

						<div class="input-group-addon">Order</div>
						<input type="number" min="0" max="10000" id="order" maxlength="18" ng-model="model.order"
						       class="form-control" placeholder="Amount" value="{{model.order}}"/>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-2 aside">
				<h4>Signs:</h4>
				<div ng-repeat="model in models track by $index" class="sign">
					<div class="btn-group btn-group-justified input-group models" role="group">
						<div class="btn-group model">
							<button id="sign" ng-click="updateCurrentModel($index)"
							        ng-class="{'active': $index == current}" class="btn btn-block btn-default">
								{{model.name}} x {{model.order}}
							</button>
						</div>
						<div class="btn-group">
							<button id="remove-sign" ng-click="removeSign($index)" class="btn btn-danger" type="button">
								-
							</button>
						</div>

					</div>
				</div>
				<div class="new">
					<button class="btn btn-block btn-primary" ng-click="newSign()"><span
							class="glyphicon glyphicon-plus"></span> New Sign
					</button>
				</div>
				<div class="import">
					<button class="btn btn-block btn-success" ng-click="triggerImport()"><span
							class="glyphicon glyphicon-upload"></span> Import Sign
					</button>
				</div>
				<input id="file" type="file" file-model='file' ng-hide="true"/>
			</div>
			<div class="col-md-6">
				<div ng-init="init()" id="preview"></div>
			</div>
			<div class="col-md-4 selects">
				<div ng-controller="textController">
					<h4>Text:</h4>

					<div class="text-form" ng-repeat="text in model.texts track by $index">
						<div class="input-group">
							<input class="text form-control" ng-value="model.texts[$index].text"
							       ng-model="model.texts[$index].text" name="text" type="text"/>
							<span class="input-group-btn">
	                             <button ng-click="removeText($index)" class="btn btn-danger" type="button">-</button>
	                        </span>
						</div>
						<div class="btn-group align" role="group">
							<button ng-repeat="align in alignment" type="button"
							        ng-click="setAlign(align, $parent.$index)"
							        ng-class="{'active': model.texts[$parent.$index].align == align}"
							        class="btn btn-default btn-xs">{{align}}
							</button>
						</div>
						<div class="size">
							<button ng-click="decreaseSize($index)" class="btn btn-danger btn-xs">-</button>
							<span>{{model.texts[$index].size}}</span>
							<button ng-click="increaseSize($index)" class="btn btn-success btn-xs">+</button>
						</div>
					</div>

					<button ng-click="addText()" ng-hide="isDisabled()" class="btn btn-success">+</button>

				</div>

				<div ng-controller="holesController" ng-show="showHoles(model.material)">
					<h4>Holes:</h4>
					<div class="checkbox" ng-repeat="hole in holes">
						<label>
							<input ng-value="hole" ng-model="model.holes[hole]" name="holes" type="checkbox"/>
							<span>{{hole}}</span>
						</label>
					</div>
				</div>

				</div>


			</div>

		<div class="row">
			<div class="col-md-4">
				<div ng-controller="shapesController" ng-show="showShapes(model.material)">
					<h4>Shapes:</h4>

					<div class="list-group">
						<a ng-class="{'active': model.shape == shape}" ng-repeat="shape in shapes"
						   ng-click="model.shape = shape" href="#/" class="list-group-item">{{shape}}</a>
					</div>

				</div>
			</div>
			<div class="col-md-4">
				<div ng-controller="sizeController" ng-show="showSize(model.material)">
					<h4>Size: {{sizeError}}</h4>

					<div class="width" ng-show="showWidthHeight()">
						<div class="input-group" ng-class="{'has-error': showWidthError()}">
							<span class="input-group-addon">
					            <span>Width: </span>
					        </span>
							<input ng-readonly="model.size.autoWidth" ng-model="model.size.width"
							       ng-value="model.size.width" class="form-control" type="number"/>
							<span class="input-group-btn">
								<button class="btn btn-default" ng-click="model.size.autoWidth = !model.size.autoWidth"
								        ng-class="{'btn-success': model.size.autoWidth, 'btn-warning': !model.size.autoWidth}"
								        type="button">Auto {{(model.size.autoWidth) ? 'ON' : 'OFF'}}
								</button>
							</span>
						</div>

					</div>
					<div class="height" ng-show="showWidthHeight()">
						<div class="input-group" ng-class="{'has-error': showHeightError()}">
							<span class="input-group-addon">
					            <span>Height: </span>
					        </span>
							<input ng-readonly="model.size.autoHeight"
							       ng-model="model.size.height" ng-value="model.size.height" class="form-control"
							       type="number"/>

							<span class="input-group-btn">
								<button class="btn btn-default"
								        ng-click="model.size.autoHeight = !model.size.autoHeight"
								        ng-class="{'btn-success': model.size.autoHeight, 'btn-warning': !model.size.autoHeight}"
								        type="button">Auto {{(model.size.autoHeight) ? 'ON' : 'OFF'}}
								</button>
							</span>
						</div>
					</div>
					<div class="radius" ng-show="showRadius()">
						<div class="input-group" ng-class="{'has-error': showRadiusError()}">
							<span class="input-group-addon">
					            <span>Radius: </span>
					        </span>
							<input ng-readonly="model.size.autoRadius"
							       ng-model="model.size.radius" ng-value="model.size.radius" class="form-control"
							       type="number"/>

							<span class="input-group-btn">
								<button class="btn btn-default"
								        ng-click="model.size.autoRadius = !model.size.autoRadius"
								        ng-class="{'btn-success': model.size.autoRadius, 'btn-warning': !model.size.autoRadius}"
								        type="button">Auto {{(model.size.autoRadius) ? 'ON' : 'OFF'}}
								</button>
							</span>
						</div>
					</div>

				</div>
			</div>
			<div class="col-md-4">
				<div ng-controller="themesController" ng-show="showThemes(model.material)">
					<h4>Themes:</h4>

					<div class="btn-group">
						<button type="button" class="form-control btn btn-default dropdown-toggle"
						        data-toggle="dropdown">
							{{model.theme.name}} <span class="caret"></span>
						</button>
						<ul class="dropdown-menu" role="menu">
							<li ng-repeat="theme in themes"><a href="#/"
							                                   ng-click="model.theme = theme">{{theme.name}}</a></li>
						</ul>
					</div>
				</div>
				<div ng-controller="fontsController" ng-show="showFonts(model.material)">
					<h4>Fonts:</h4>

					<div class="btn-group">
						<button type="button" class="form-control btn btn-default dropdown-toggle"
						        data-toggle="dropdown">
							{{model.font}} <span class="caret"></span>
						</button>
						<ul class="dropdown-menu" role="menu">
							<li ng-repeat="font in fonts"><a href="#/"
							                                 ng-click="model.font = font">{{font}}</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="row" ng-hide="true">
			<div class="col-md-2"></div>
			<div class="col-md-6">
				<div ng-hide="summary(models).price == 0" class="order">
					<h3>Your order:</h3>
					<table class="table">
						<thead>
						<tr>
							<th>#</th>
							<th>Amount</th>
							<th>Cost</th>
						</tr>
						</thead>
						<tbody>
						<tr ng-class="{'success': current == $index}" ng-repeat="template in models track by $index"
						    ng-hide="calcPrice(template) == 0">
							<td>{{$index + 1}}</td>
							<td>{{template.order}}</td>
							<td><span class="label label-success">{{calcPrice(template)}} kr</span></td>
						</tr>
						</tbody>
						<tfoot>
						<tr>
							<td>#</td>
							<td>{{summary(models).order}}</td>
							<td><span class="label label-success">{{summary(models).price}} kr</span></td>
						</tr>
						</tfoot>
					</table>
					<button class="btn btn-success btn-lg">Order everything</button>
				</div>
			</div>
		</div>
	</div>
</body>
</html>